<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SHS Form | DSWD CM Tool</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    :root { --primary-red: #9b1c20; --dark-red: #7e161a; --accent-gold: #ffc107; --light-gray: #f4f7f6; --text-dark: #333333; --text-light: #ffffff; --border-color: #e0e0e0; }
    body { font-family: 'Inter', sans-serif; background-color: var(--light-gray); margin: 0; color: var(--text-dark); }
    .page-container { display: flex; }
    .sidebar { width: 250px; background-color: var(--primary-red); height: 100vh; position: fixed; left: 0; top: 0; transition: transform 0.3s ease; }
    .sidebar .header { padding: 20px; background-color: var(--dark-red); color: var(--text-light); font-size: 20px; font-weight: 700; text-align: center; }
    .sidebar a { display: block; color: var(--text-light); padding: 18px 20px; text-decoration: none; font-weight: 600; border-bottom: 1px solid var(--dark-red); transition: background-color 0.2s; }
    .sidebar a.active { background-color: var(--accent-gold); color: var(--text-dark); }
    .sidebar a:hover:not(.active) { background-color: var(--dark-red); }
    .main-content { flex-grow: 1; margin-left: 250px; padding: 30px; transition: margin-left 0.3s ease; }
    .header-bar { display: none; justify-content: space-between; align-items: center; background: var(--text-light); padding: 10px 20px; border-bottom: 1px solid var(--border-color); }
    .menu-toggle { font-size: 28px; cursor: pointer; background: none; border: none; }
    
    form { background: #fff; padding: 30px; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.05); }
    h2 { color: var(--primary-red); border-bottom: 2px solid var(--border-color); padding-bottom: 10px; }
    label { display: block; margin-top: 20px; font-weight: 600; font-size: 14px; margin-bottom: 8px; }
    input, select { width: 100%; padding: 12px; font-size: 16px; border-radius: 6px; border: 1px solid var(--border-color); box-sizing: border-box; background-color: var(--light-gray); }
    input:focus, select:focus { border-color: var(--primary-red); outline: none; box-shadow: 0 0 0 2px rgba(155, 28, 32, 0.2); }
    button[type="submit"] { background-color: var(--primary-red); color: #fff; padding: 14px; border: none; border-radius: 6px; margin-top: 30px; cursor: pointer; font-weight: 600; width: 100%; font-size: 16px; transition: background-color 0.2s; }
    button[type="submit"]:hover { background-color: var(--dark-red); }
    button[type="submit"]:disabled { background-color: #ccc; cursor: not-allowed; }
    #aiResult { margin-top: 20px; background-color: #e9f5ff; border-radius: 8px; padding: 15px; white-space: pre-wrap; display: none; font-size: 14px; }

    @media screen and (max-width: 768px) {
      .sidebar { transform: translateX(-100%); z-index: 1000; }
      .sidebar.open { transform: translateX(0); }
      .main-content { margin-left: 0; padding: 20px; }
      .header-bar { display: flex; }
    }
  </style>
</head>
<body>
  <div class="page-container">
    <div class="sidebar" id="sidebar">
      <div class="header">DSWD CM Tool</div>
      <a href="index.html">üè† Dashboard</a>
      <a href="forms.html" class="active">üìù Fill Out a Form</a>
      <a href="upload.html">üì§ Upload Files</a>
      <a href="admin.html">‚öôÔ∏è Admin Panel</a>
      <a href="login.html">üîí Login</a>
    </div>

    <div class="main-content">
      <header class="header-bar">
        <span style="font-weight: 700; color: var(--primary-red);">SHS Form</span>
        <button class="menu-toggle" id="menu-toggle">‚ò∞</button>
      </header>

      <form id="shsForm">
        <h2>Senior High School Profiling Form</h2>

        <label for="region">Region</label>
        <select id="region" name="region" required>
            <option value="">Select Region</option>
            <option value="IV-A">Region IV-A</option>
        </select>
        
        <label for="province">Province</label>
        <select id="province" name="province" required>
            <option value="">Select Province</option>
            <option value="Batangas">Batangas</option>
            <option value="Cavite">Cavite</option>
            <option value="Laguna">Laguna</option>
            <option value="Quezon">Quezon</option>
            <option value="Rizal">Rizal</option>
        </select>
        
        <label for="city">City/Municipality</label>
        <select id="city" name="city" required>
            <option value="">Select City/Municipality</option>
        </select>
        
        <label for="hhId">HH ID</label>
        <input type="text" id="hhId" name="hhId" required>
        
        <label for="lastName">Last Name</label>
        <input type="text" id="lastName" name="lastName" required>
        
        <label for="firstName">First Name</label>
        <input type="text" id="firstName" name="firstName" required>
        
        <label for="middleName">Middle Name</label>
        <input type="text" id="middleName" name="middleName">
        
        <label for="extName">Extension Name</label>
        <input type="text" id="extName" name="extName">
        
        <label for="birthday">Birthday</label>
        <input type="date" id="birthday" name="birthday" required>
        
        <label for="sex">Sex</label>
        <select id="sex" name="sex" required>
            <option value="">Select</option>
            <option value="Male">Male</option>
            <option value="Female">Female</option>
        </select>
        
        <label for="civilStatus">Civil Status</label>
        <select id="civilStatus" name="civilStatus" required>
            <option value="">Select</option>
            <option>Single</option>
            <option>Married</option>
            <option>Widowed</option>
            <option>Separated</option>
        </select>
        
        <label for="ipAffiliation">IP Affiliation</label>
        <input type="text" id="ipAffiliation" name="ipAffiliation" placeholder="Enter Non-IP if None">
        
        <label for="disability">Disability</label>
        <select id="disability" name="disability" required>
            <option value="">Select</option>
            <option>Yes</option>
            <option>No</option>
        </select>
        
        <label for="attendingSchool">Attending School</label>
        <select id="attendingSchool" name="attendingSchool" required>
            <option value="">Select</option>
            <option>Yes</option>
            <option>No</option>
        </select>
        
        <label for="gradeLevel">Grade Level</label>
        <input type="text" id="gradeLevel" name="gradeLevel" required>
        
        <label for="track">Track</label>
        <select id="track" name="track" required>
            <option value="">Select</option>
            <option>Academic</option>
            <option>Technical-Vocational-Livelihood</option>
        </select>
        
        <label for="strand">Strand</label>
        <select id="strand" name="strand" required>
            <option value="">Select a track first</option>
        </select>
        
        <label for="curriculumExit">Curriculum Exit</label>
        <select id="curriculumExit" name="curriculumExit" required>
            <option value="">Select</option>
            <option>Employment</option>
            <option>Entrepreneurship</option>
            <option>Middle-level Skills Development</option>
            <option>Higher Education</option>
        </select>
        
        <button type="submit" id="submitButton">Submit Form</button>
        
        <div id="aiResult"></div>
      </form>
    </div>
  </div>
  
  <script>
    // --- Mobile Menu Script ---
    document.getElementById('menu-toggle').addEventListener('click', () => {
      document.getElementById('sidebar').classList.toggle('open');
    });

    // --- Dependent Dropdown Logic ---
    const cityData = {
        Batangas: ["Agoncillo", "Alitagtag", "Balayan", "Balete", "Batangas City", "Bauan", "Calaca", "Calatagan", "Cuenca", "Ibaan", "Laurel", "Lemery", "Lian", "Lipa", "Lobo", "Mabini", "Malvar", "Mataasnakahoy", "Nasugbu", "Padre Garcia", "Rosario", "San Jose", "San Juan", "San Luis", "San Nicolas", "San Pascual", "Santa Teresita", "Santo Tomas", "Taal", "Talisay", "Tanauan", "Taysan", "Tingloy", "Tuy"],
        Cavite: ["Alfonso", "Amadeo", "Bacoor", "Carmona", "Cavite City", "Dasmari√±as", "General Emilio Aguinaldo", "General Mariano Alvarez", "General Trias", "Imus", "Indang", "Kawit", "Magallanes", "Maragondon", "Mendez", "Naic", "Noveleta", "Rosario", "Silang", "Tagaytay", "Tanza", "Ternate", "Trece Martires"],
        Laguna: ["Alaminos", "Bay", "Bi√±an", "Cabuyao", "Calamba", "Calauan", "Cavinti", "Famy", "Kalayaan", "Liliw", "Los Ba√±os", "Luisiana", "Lumban", "Mabitac", "Magdalena", "Majayjay", "Nagcarlan", "Paete", "Pagsanjan", "Pakil", "Pangil", "Pila", "Rizal", "San Pablo", "San Pedro", "Santa Cruz", "Santa Maria", "Santa Rosa", "Siniloan", "Victoria"],
        Quezon: ["Agdangan", "Alabat", "Atimonan", "Buenavista", "Burdeos", "Calauag", "Candelaria", "Catanauan", "Dolores", "General Luna", "General Nakar", "Guinayangan", "Gumaca", "Infanta", "Jomalig", "Lopez", "Lucban", "Lucena", "Macalelon", "Mauban", "Mulanay", "Padre Burgos", "Pagbilao", "Panukulan", "Patnanungan", "Perez", "Pitogo", "Plaridel", "Polillo", "Quezon", "Real", "Sampaloc", "San Andres", "San Antonio", "San Francisco", "San Narciso", "Sariaya", "Tagkawayan", "Tayabas", "Tiaong", "Unisan"],
        Rizal: ["Angono", "Antipolo", "Baras", "Binangonan", "Cainta", "Cardona", "Jalajala", "Morong", "Pililla", "Rodriguez", "San Mateo", "Tanay", "Taytay", "Teresa"]
    };

    document.getElementById('province').addEventListener('change', function() {
      const cities = cityData[this.value] || [];
      const citySelect = document.getElementById('city');
      citySelect.innerHTML = '<option value="">Select City/Municipality</option>';
      cities.forEach(city => {
        const option = document.createElement('option');
        option.textContent = city;
        option.value = city;
        citySelect.appendChild(option);
      });
    });

    document.getElementById('track').addEventListener('change', function() {
        const strand = document.getElementById('strand');
        strand.innerHTML = '<option value="">Select Strand</option>';
        if (this.value === 'Academic') {
            ['STEM', 'ABM', 'HUMSS', 'GAS'].forEach(s => {
                const option = document.createElement('option');
                option.text = s;
                option.value = s;
                strand.appendChild(option);
            });
        } else if (this.value === 'Technical-Vocational-Livelihood') {
             ['ICT', 'Home Economics', 'Industrial Arts'].forEach(s => {
                const option = document.createElement('option');
                option.text = s;
                option.value = s;
                strand.appendChild(option);
            });
        }
    });

    // --- Form Submission Logic ---
    document.getElementById('shsForm').addEventListener('submit', function(e) {
      e.preventDefault();
      
      const submitButton = document.getElementById('submitButton');
      const aiResultDiv = document.getElementById('aiResult');
      const formData = new FormData(this);
      const data = Object.fromEntries(formData.entries());

      submitButton.disabled = true;
      submitButton.textContent = 'Submitting... (Server may take up to a minute to wake up)';
      aiResultDiv.style.display = 'block';
      aiResultDiv.innerHTML = 'Submitting data to server... Please be patient.';

      const endpoint = 'https://casemanagement-server.onrender.com/submit-shs';

      fetch(endpoint, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(data)
      })
      .then(response => {
        if (!response.ok) {
          return response.text().then(text => { throw new Error(`Server error: ${response.statusText} - ${text}`) });
        }
        return response.json();
      })
      .then(result => {
        aiResultDiv.innerHTML = `<strong>‚úÖ Success!</strong><br>${result.message}`;
        submitButton.disabled = false;
        submitButton.textContent = 'Submit Form';
        document.getElementById('shsForm').reset(); // Clears the form after successful submission
      })
      .catch(error => {
        console.error('Error:', error);
        aiResultDiv.innerHTML = '‚ùå Error submitting form. Please try again in a minute. Check the console (F12) for details.';
        submitButton.disabled = false;
        submitButton.textContent = 'Submit Form';
      });
    });
  </script>

</body>
</html>